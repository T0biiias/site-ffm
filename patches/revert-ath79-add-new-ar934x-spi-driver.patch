From 39d4492ef5440bdf79d23d6c89df453c2117e7f8 Mon Sep 17 00:00:00 2001
From: Grische <github@grische.xyz>
Date: Tue, 12 Dec 2023 18:19:25 +0100
Subject: [PATCH] Revert "ath79: add new ar934x spi driver"

---
 ...vert-ath79-add-new-ar934x-spi-driver.patch | 23 +++++++++++++++++++
 1 file changed, 23 insertions(+)
 create mode 100644 patches/openwrt/0016-Revert-ath79-add-new-ar934x-spi-driver.patch

diff --git a/patches/openwrt/0016-Revert-ath79-add-new-ar934x-spi-driver.patch b/patches/openwrt/0016-Revert-ath79-add-new-ar934x-spi-driver.patch
new file mode 100644
index 00000000..52599417
--- /dev/null
+++ b/patches/openwrt/0016-Revert-ath79-add-new-ar934x-spi-driver.patch
@@ -0,0 +1,23 @@
+From: Grische <2787581+grische@users.noreply.github.com>
+Date: Tue, 12 Dec 2023 18:17:27 +0100
+Subject: Revert "ath79: add new ar934x spi driver"
+
+This reverts commit ebf0d8dadeca443121f4f597c51bf6591e341caf.
+
+diff --git a/target/linux/ath79/dts/ar934x.dtsi b/target/linux/ath79/dts/ar934x.dtsi
+index d88c7bfabc17ced1c211b2a8f9bfa4ae8cb0bd78..687910fd7d76222d0099d0f0551c3ebd5136ae91 100644
+--- a/target/linux/ath79/dts/ar934x.dtsi
++++ b/target/linux/ath79/dts/ar934x.dtsi
+@@ -199,10 +199,11 @@
+ 		};
+ 
+ 		spi: spi@1f000000 {
+-			compatible = "qca,ar934x-spi";
++			compatible = "qca,ar9340-spi", "qca,ar7100-spi";
+ 			reg = <0x1f000000 0x1c>;
+ 
+ 			clocks = <&pll ATH79_CLK_AHB>;
++			clock-names = "ahb";
+ 
+ 			#address-cells = <1>;
+ 			#size-cells = <0>;
-- 
2.34.1

